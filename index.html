<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neon Pulse Heart</title>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: radial-gradient(circle at 20% 20%, #270125, #050107 60%);
        font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        overflow: hidden;
        color: #fce4ff;
      }

      .glow-layer {
        position: fixed;
        inset: -20%;
        background:
          radial-gradient(circle at 15% 20%, rgba(255, 65, 155, 0.35), transparent 45%),
          radial-gradient(circle at 85% 10%, rgba(120, 60, 255, 0.3), transparent 50%),
          radial-gradient(circle at 45% 80%, rgba(255, 110, 190, 0.2), transparent 40%);
        filter: blur(30px);
        opacity: 0.9;
        animation: background-drift 22s ease-in-out infinite alternate;
        pointer-events: none;
      }

      canvas {
        display: block;
        width: 100vw;
        height: 100vh;
      }

      .tagline {
        position: fixed;
        bottom: 4vh;
        width: 100%;
        text-align: center;
        letter-spacing: 0.5em;
        font-size: 0.75rem;
        text-transform: uppercase;
        opacity: 0.8;
        text-shadow: 0 0 18px rgba(255, 100, 170, 0.7);
        pointer-events: none;
        animation: tagline-glow 3.5s ease-in-out infinite;
      }

      @keyframes background-drift {
        0% {
          transform: translate3d(-3%, -2%, 0) scale(0.9);
        }
        100% {
          transform: translate3d(3%, 2%, 0) scale(1.1);
        }
      }

      @keyframes tagline-glow {
        0%,
        100% {
          opacity: 0.6;
        }
        50% {
          opacity: 0.95;
        }
      }
    </style>
  </head>
  <body>
    <div class="glow-layer"></div>
    <canvas id="heart"></canvas>
    <p class="tagline">resonant bloom</p>
    <script>
      const canvas = document.getElementById("heart");
      const ctx = canvas.getContext("2d");
      const DPR = window.devicePixelRatio || 1;
      const HEART_STEPS = 1600;
      const STROKE_PARTICLES = [];
      const SPARKS = [];
      const pathPoints = [];
      let width = 0;
      let height = 0;
      let centerX = 0;
      let centerY = 0;
      let scale = 1;
      let cursor = 0;
      let strokeAccumulator = 0;
      let lastTime = performance.now();

      function resize() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width * DPR;
        canvas.height = height * DPR;
        canvas.style.width = width + "px";
        canvas.style.height = height + "px";
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.scale(DPR, DPR);
        centerX = width / 2;
        centerY = height / 2 + height * 0.02;
        scale = Math.min(width, height) * 0.032;
      }

      window.addEventListener("resize", resize);
      resize();

      function buildHeartPath() {
        pathPoints.length = 0;
        for (let i = 0; i < HEART_STEPS; i++) {
          const t = (i / HEART_STEPS) * Math.PI * 2;
          const x = 16 * Math.pow(Math.sin(t), 3);
          const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
          pathPoints.push({ x, y });
        }
      }

      buildHeartPath();

      function spawnStrokePoint(index) {
        const point = pathPoints[index];
        const jitter = (Math.random() - 0.5) * 0.9;
        const px = centerX + (point.x + jitter) * scale;
        const py = centerY - (point.y + jitter) * scale;
        const size = 2.2 + Math.random() * 1.8;
        const maxLife = 0.85 + Math.random() * 0.45;

        STROKE_PARTICLES.push({
          x: px,
          y: py,
          size,
          life: 0,
          maxLife,
          hue: 324 + Math.random() * 24,
        });

        // trailing spark bursts
        for (let i = 0; i < 3; i++) {
          const angle = Math.random() * Math.PI * 2;
          const speed = 18 + Math.random() * 35;
          SPARKS.push({
            x: px,
            y: py,
            vx: Math.cos(angle) * speed,
            vy: Math.sin(angle) * speed,
            life: 0,
            maxLife: 0.4 + Math.random() * 0.35,
            size: 0.6 + Math.random() * 0.7,
          });
        }
      }

      function updateParticles(dt) {
        for (let i = STROKE_PARTICLES.length - 1; i >= 0; i--) {
          const p = STROKE_PARTICLES[i];
          p.life += dt;
          if (p.life >= p.maxLife) {
            STROKE_PARTICLES.splice(i, 1);
            continue;
          }
        }

        for (let i = SPARKS.length - 1; i >= 0; i--) {
          const s = SPARKS[i];
          s.life += dt;
          if (s.life >= s.maxLife) {
            SPARKS.splice(i, 1);
            continue;
          }
          s.x += s.vx * dt;
          s.y += s.vy * dt;
          s.vx *= 0.96;
          s.vy *= 0.96;
        }
      }

      function drawParticles(headPoint) {
        ctx.globalCompositeOperation = "source-over";
        ctx.fillStyle = "rgba(4, 2, 8, 0.22)";
        ctx.fillRect(0, 0, width, height);

        ctx.globalCompositeOperation = "lighter";
        STROKE_PARTICLES.forEach((p) => {
          const t = p.life / p.maxLife;
          const alpha = Math.sin(t * Math.PI);
          ctx.fillStyle = `hsla(${p.hue}, 100%, ${55 + t * 25}%, ${0.6 * alpha})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size * (0.6 + alpha * 0.8), 0, Math.PI * 2);
          ctx.fill();
        });

        SPARKS.forEach((s) => {
          const t = s.life / s.maxLife;
          const alpha = 1 - t;
          ctx.fillStyle = `rgba(255, 210, 255, ${0.4 * alpha})`;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
          ctx.fill();
        });

        // head glow
        if (headPoint) {
          const gradient = ctx.createRadialGradient(headPoint.x, headPoint.y, 0, headPoint.x, headPoint.y, 26);
          gradient.addColorStop(0, "rgba(255, 255, 255, 0.9)");
          gradient.addColorStop(0.3, "rgba(255, 120, 200, 0.9)");
          gradient.addColorStop(1, "rgba(255, 120, 200, 0)");
          ctx.fillStyle = gradient;
          ctx.beginPath();
          ctx.arc(headPoint.x, headPoint.y, 26, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      function animate(timestamp) {
        const dt = Math.min(0.033, (timestamp - lastTime) / 1000);
        lastTime = timestamp;

        const drawSpeed = HEART_STEPS * 0.35 * dt;
        strokeAccumulator += drawSpeed;
        while (strokeAccumulator >= 1) {
          cursor = (cursor + 1) % HEART_STEPS;
          spawnStrokePoint(cursor);
          strokeAccumulator -= 1;
        }

        const headPoint = pathPoints[cursor];
        const head = {
          x: centerX + headPoint.x * scale,
          y: centerY - headPoint.y * scale,
        };

        updateParticles(dt);
        drawParticles(head);

        requestAnimationFrame(animate);
      }

      requestAnimationFrame(animate);
    </script>
  </body>
</html>

